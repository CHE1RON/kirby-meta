(function(){"use strict";var U="",d=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"k-meta-sharing-preview"},[e("div",{staticClass:"k-meta-sharing-preview__label k-field-label"},[e("k-icon",{attrs:{type:"share"}}),e("span",[t._v(t._s(t.headline))])],1),e("div",{staticClass:"k-meta-sharing-preview__box"},[e("div",{staticClass:"k-meta-sharing-preview__image-container",attrs:{"data-image-missing":!t.og_image,"data-image-missing-text":t.$t("fabianmichael.meta.og_image.missing")}},[t.og_image?e("img",{staticClass:"k-meta-sharing-preview__preview-image",attrs:{src:t.og_image}}):t._e(),t.og_image_source?e("span",{staticClass:"k-meta-sharing-preview__source-badge"},[t._v(t._s(t.og_image_source))]):t._e()]),e("div",{staticClass:"k-meta-sharing-preview__content-container"},[e("span",{staticClass:"k-meta-sharing-preview__site-name"},[t._v(t._s(t.site_name))]),e("h2",{staticClass:"k-meta-sharing-preview__preview-headline"},[t._v(" "+t._s(t.title)+" ")]),e("p",{staticClass:"k-meta-sharing-preview__preview-paragraph"},[t._v(" "+t._s(t.description)+" ")])])])])},u=[],j="";function l(t,a,e,i,r,g,p,E){var s=typeof t=="function"?t.options:t;a&&(s.render=a,s.staticRenderFns=e,s._compiled=!0),i&&(s.functional=!0),g&&(s._scopeId="data-v-"+g);var _;if(p?(_=function(n){n=n||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!n&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(n=__VUE_SSR_CONTEXT__),r&&r.call(this,n),n&&n._registeredComponents&&n._registeredComponents.add(p)},s._ssrRegister=_):r&&(_=E?function(){r.call(this,(s.functional?this.parent:this).$root.$options.shadowRoot)}:r),_)if(s.functional){s._injectStyles=_;var H=s.render;s.render=function(I,v){return _.call(v),H(I,v)}}else{var h=s.beforeCreate;s.beforeCreate=h?[].concat(h,_):[_]}return{exports:t,options:s}}const k={props:{blueprint:String,lock:[Boolean,Object],help:String,name:String,parent:String,timestamp:Number},data(){return{headline:"Basic Meta Information",metadata_og_image:null,metadata_og_image_field:null,page_is_homepage:null,page_title:null,page_metadata_description:null,site_meta_description:null,site_name:null,site_og_image:null,site_title:null,title_separator:null,url:null,og_image:null,og_image_source:null}},async created(){const t=await this.load();this.headline=t.headline,this.metadata_og_image=t.metadata_og_image,this.metadata_og_image_field=t.metadata_og_image_field,this.page_is_homepage=t.page_is_homepage,this.page_title=t.page_title,this.page_metadata_description=t.page_metadata_description,this.site_meta_description=t.site_meta_description,this.site_name=t.site_name,this.site_og_image=t.site_og_image,this.site_title=t.site_title,this.title_separator=t.title_separator,this.url=t.url,this.updateOgImage()},computed:{title(){const{og_title:t,meta_title:a}=this.$store.getters["content/values"]();return this.page_is_homepage?t||a||this.site_name:t||a||this.page_title},description(){const{og_description:t,meta_description:a}=this.$store.getters["content/values"]();return t||a||this.page_metadata_description||this.site_meta_description||this.$t("fabianmichael.meta.description_missing")},store_image(){return this.$store.getters["content/values"]().og_image}},watch:{store_image:{handler(){this.updateOgImage()},immediate:!0}},methods:{load(){return this.$api.get(this.parent+"/sections/"+this.name)},updateOgImage(){this.store_image.length>0?this.$api.files.get(this.$store.getters["content/model"]().api,this.store_image[0].filename,{view:"compact"}).then(t=>{this.og_image=t.url,this.og_image_source=this.$t("fabianmichael.meta.source.og_image")}):this.metadata_og_image!==null?(this.og_image=this.metadata_og_image.url,this.og_image_source=this.$t("fabianmichael.meta.source.metadata")):this.site_og_image!==null?(this.og_image=this.site_og_image.url,this.og_image_source=this.$t("fabianmichael.meta.source.site")):this.og_image=null}}},o={};var f=l(k,d,u,!1,C,null,null,null);function C(t){for(let a in o)this[a]=o[a]}var w=function(){return f.exports}(),$=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("k-field",t._b({staticClass:"k-meta-title-preview"},"k-field",t.$props,!1),[e("div",{staticClass:"k-meta-title-preview__content"},[e("img",{staticClass:"k-k-meta-title-separator-preview__favicon",attrs:{alt:"",width:"16",height:"16",src:t.$urls.site+"/favicon.ico",hidden:!t.showFavicon},on:{error:function(i){t.showFavicon=!1},load:function(i){t.showFavicon=!0}}}),e("div",{staticClass:"k-meta-title-preview__title"},[e("span",[t._v(t._s(t.title))]),t._v(" "),t.isHomePage?t._e():e("span",{staticClass:"k-meta-title-preview__separator"},[t._v(t._s(t.separatorPreview))]),t._v(" "),t.isHomePage?t._e():e("span",[t._v(t._s(t.siteTitle))])])])])},b=[],B="";const y={data(){return{showFavicon:!1}},props:{siteTitle:String,separator:String,label:String,modelTitle:String,isHomePage:Boolean,theme:{default:()=>"field",type:String}},computed:{separatorPreview(){return this.$store.getters["content/values"]().meta_title_separator||this.separator},title(){const t=this.$store.getters["content/values"]();return this.isHomePage?t.meta_title||this.siteTitle:t.meta_title||this.modelTitle||this.$t("fabianmichael.meta.page_title.placeholder")}}},m={};var S=l(y,$,b,!1,x,null,null,null);function x(t){for(let a in m)this[a]=m[a]}var T=function(){return S.exports}(),F=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("k-inside",[e("k-view",[e("k-header",[t._v(" Metadata "),e("k-button-group",{attrs:{slot:"left"},slot:"left"},[e("k-button",{attrs:{text:"Validate links",icon:"wand"},on:{click:t.checkLinks}})],1)],1),e("table",{staticClass:"k-meta"},[e("thead",[e("tr",[e("th",[e("span",{staticClass:"k-meta-title"},[e("span",{staticClass:"k-meta-caps"},[t._v("Title Override")])])]),e("th",[e("span",{staticClass:"k-meta-title"},[e("span",{staticClass:"k-meta-caps"},[t._v("Meta Description")])])]),e("th",[e("span",{staticClass:"k-meta-title"},[e("k-icon",{attrs:{type:"share"}}),e("span",{staticClass:"k-meta-caps"},[t._v("Title")])],1)]),e("th",{staticStyle:{width:"14rem"}},[e("span",{staticClass:"k-meta-title"},[e("k-icon",{attrs:{type:"share"}}),e("span",{staticClass:"k-meta-caps"},[t._v("Description")])],1)]),e("th",{staticClass:"k-meta-thumbnail-col"},[e("k-icon",{attrs:{type:"image"}})],1),e("th",{staticStyle:{width:"14rem"}},[e("span",{staticClass:"k-meta-title"},[e("k-icon",{attrs:{type:"image"}}),e("span",{staticClass:"k-meta-caps"},[t._v("Alt")])],1)]),e("th",{staticStyle:{width:"3rem"}},[e("span",{staticClass:"sr-only"},[t._v("All links are valid")]),e("k-icon",{attrs:{type:"url"}})],1)])]),e("tbody",[t._l(t.pages,function(i,r){return[e("tr",{key:r+"_head"},[e("th",{staticClass:"k-meta-page-header-col",attrs:{colspan:"7"}},[e("div",{staticClass:"k-meta-page-header"},[e("k-icon",{attrs:{type:i.icon||"page"}}),e("k-link",{attrs:{to:i.panelUrl+"?tab=meta"}},[t._v(t._s(i.title))]),e("code",[t._v(t._s(i.id))]),e("span",{staticClass:"k-meta-template"},[e("k-icon",{attrs:{type:"template"}}),e("span",[t._v(t._s(i.template))])],1)],1)])]),e("tr",{key:r+"_content"},[e("td",[i.meta_title?e("div",{staticClass:"k-meta-text-xs k-meta-max-3-lines"},[t._v(t._s(i.meta_title))]):[t._v("\u2014")]],2),e("td",[i.meta_description?e("div",{staticClass:"k-meta-text-xs k-meta-max-3-lines"},[t._v(t._s(i.meta_description))]):[t._v("\u2014")]],2),e("td",[i.og_title?e("div",{staticClass:"k-meta-text-xs k-meta-max-3-lines"},[t._v(t._s(i.og_title))]):[t._v("\u2014")]],2),e("td",[i.og_description?e("div",{staticClass:"k-meta-text-xs k-meta-max-3-lines"},[t._v(t._s(i.og_description))]):[t._v("\u2014")]],2),e("td",{staticClass:"k-meta-thumbnail-col"},[i.og_image?[e("k-link",{attrs:{to:i.og_image_panelUrl}},[e("k-image",t._b({attrs:{cover:!0,ratio:"1200/630",back:"pattern"}},"k-image",i.og_image,!1))],1)]:e("div",{staticClass:"k-meta-center"},[t._v("\u2014")])],2),e("td",[i.og_image_alt?e("div",{staticClass:"k-meta-text-xs k-meta-max-3-lines"},[t._v(t._s(i.og_image_alt))]):[t._v("\u2014")]],2),e("td",[e("div",{staticClass:"k-meta-center"},[t._v("?")])])])]})],2)])],1)],1)},P=[],N="";const M={props:{dir:String,sort:String,pages:Object},computed:{},methods:{checkLinks(){}}},c={};var O=l(M,F,P,!1,R,null,null,null);function R(t){for(let a in c)this[a]=c[a]}var V=function(){return O.exports}();panel.plugin("fabianmichael/meta",{components:{"k-meta-view":V},fields:{"meta-title-preview":T},sections:{"meta-share-preview":w}})})();
