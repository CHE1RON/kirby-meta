(()=>{(function(){"use strict";var O="",u=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"k-meta-sharing-preview"},[t("div",{staticClass:"k-meta-sharing-preview__label k-field-label"},[t("k-icon",{attrs:{type:"share"}}),t("span",[e._v(e._s(e.headline))])],1),t("div",{staticClass:"k-meta-sharing-preview__box"},[t("div",{staticClass:"k-meta-sharing-preview__image-container",attrs:{"data-image-missing":!e.og_image,"data-image-missing-text":e.$t("fabianmichael.meta.og_image.missing")}},[e.og_image?t("img",{staticClass:"k-meta-sharing-preview__preview-image",attrs:{src:e.og_image}}):e._e(),e.og_image_source?t("span",{staticClass:"k-meta-sharing-preview__source-badge"},[e._v(e._s(e.og_image_source))]):e._e()]),t("div",{staticClass:"k-meta-sharing-preview__content-container"},[t("span",{staticClass:"k-meta-sharing-preview__site-name"},[e._v(e._s(e.site_name))]),t("h2",{staticClass:"k-meta-sharing-preview__preview-headline"},[e._v(" "+e._s(e.title)+" ")]),t("p",{staticClass:"k-meta-sharing-preview__preview-paragraph"},[e._v(" "+e._s(e.description)+" ")])])])])},d=[],H="";function o(e,i,t,_,r,g,c,y){var a=typeof e=="function"?e.options:e;i&&(a.render=i,a.staticRenderFns=t,a._compiled=!0),_&&(a.functional=!0),g&&(a._scopeId="data-v-"+g);var n;if(c?(n=function(s){s=s||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!s&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(s=__VUE_SSR_CONTEXT__),r&&r.call(this,s),s&&s._registeredComponents&&s._registeredComponents.add(c)},a._ssrRegister=n):r&&(n=y?function(){r.call(this,(a.functional?this.parent:this).$root.$options.shadowRoot)}:r),n)if(a.functional){a._injectStyles=n;var F=a.render;a.render=function(R,p){return n.call(p),F(R,p)}}else{var h=a.beforeCreate;a.beforeCreate=h?[].concat(h,n):[n]}return{exports:e,options:a}}const v={props:{blueprint:String,lock:[Boolean,Object],help:String,name:String,parent:String,timestamp:Number},data(){return{headline:"Basic Meta Information",metadata_og_image:null,metadata_og_image_field:null,page_is_homepage:null,page_title:null,page_metadata_description:null,site_meta_description:null,site_name:null,site_og_image:null,site_title:null,title_separator:null,url:null,og_image:null,og_image_source:null}},async created(){const e=await this.load();this.headline=e.headline,this.metadata_og_image=e.metadata_og_image,this.metadata_og_image_field=e.metadata_og_image_field,this.page_is_homepage=e.page_is_homepage,this.page_title=e.page_title,this.page_metadata_description=e.page_metadata_description,this.site_meta_description=e.site_meta_description,this.site_name=e.site_name,this.site_og_image=e.site_og_image,this.site_title=e.site_title,this.title_separator=e.title_separator,this.url=e.url,this.updateOgImage()},computed:{title(){const{og_title:e,meta_title:i}=this.$store.getters["content/values"]();return this.page_is_homepage?e||i||this.site_name:e||i||this.page_title},description(){const{og_description:e,meta_description:i}=this.$store.getters["content/values"]();return e||i||this.page_metadata_description||this.site_meta_description||this.$t("fabianmichael.meta.description_missing")},store_image(){return this.$store.getters["content/values"]().og_image}},watch:{store_image:{handler(){this.updateOgImage()},immediate:!0}},methods:{load(){return this.$api.get(this.parent+"/sections/"+this.name)},updateOgImage(){this.store_image.length>0?this.$api.files.get(this.$store.getters["content/model"]().api,this.store_image[0].filename,{view:"compact"}).then(e=>{this.og_image=e.url,this.og_image_source=this.$t("fabianmichael.meta.source.og_image")}):this.metadata_og_image!==null?(this.og_image=this.metadata_og_image.url,this.og_image_source=this.$t("fabianmichael.meta.source.metadata")):this.site_og_image!==null?(this.og_image=this.site_og_image.url,this.og_image_source=this.$t("fabianmichael.meta.source.site")):this.og_image=null}}},l={};var f=o(v,u,d,!1,w,null,null,null);function w(e){for(let i in l)this[i]=l[i]}var $=function(){return f.exports}(),C=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("k-field",e._b({staticClass:"k-meta-title-preview"},"k-field",e.$props,!1),[t("div",{staticClass:"k-meta-title-preview__content"},[t("img",{staticClass:"k-k-meta-title-separator-preview__favicon",attrs:{alt:"",width:"16",height:"16",src:e.$urls.site+"/favicon.ico",hidden:!e.showFavicon},on:{error:function(_){e.showFavicon=!1},load:function(_){e.showFavicon=!0}}}),t("div",{staticClass:"k-meta-title-preview__title"},[t("span",[e._v(e._s(e.title))]),e._v(" "),e.isHomePage?e._e():t("span",{staticClass:"k-meta-title-preview__separator"},[e._v(e._s(e.separatorPreview))]),e._v(" "),e.isHomePage?e._e():t("span",[e._v(e._s(e.siteTitle))])])])])},k=[],I="";const b={data(){return{showFavicon:!1}},props:{siteTitle:String,separator:String,label:String,modelTitle:String,isHomePage:Boolean,theme:{default:()=>"field",type:String}},computed:{separatorPreview(){return this.$store.getters["content/values"]().meta_title_separator||this.separator},title(){const e=this.$store.getters["content/values"]();return this.isHomePage?e.meta_title||this.siteTitle:e.meta_title||this.modelTitle||this.$t("fabianmichael.meta.page_title.placeholder")}}},m={};var S=o(b,C,k,!1,T,null,null,null);function T(e){for(let i in m)this[i]=m[i]}var P=function(){return S.exports}();panel.plugin("fabianmichael/meta",{fields:{"meta-title-preview":P},sections:{"meta-share-preview":$}})})();})();
